var ElSemverInput=function(e){"use strict";function t(e){t.installed||(t.installed=!0,e.component("ElSemverInput",a))}!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),n=".is-error.semver-input .el-input__inner { border: 1px solid rgba(226,65,86,0.5); } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),e.appendChild(t)}}();var n="v",i=[{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.([1-9]\d*|0)$/,padding:""},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.$/,padding:"0"},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)$/,padding:".0"},{regular:/^v?([1-9]\d*|0)\.$/,padding:"0.0"},{regular:/^v?([1-9]\d*|0)$/,padding:".0.0"},{regular:/^v?$/,padding:"1.0.0"}],r=[{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.0+$/,fixStr:function(e){var t=e.split("."),n=t.length-1;return t[n]=t[n].replace(/^0+/,"0"),t.join(".")}},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.0+[1-9]\d*$/,fixStr:function(e){var t=e.split("."),n=t.length-1;return t[n]=t[n].replace(/^0+/,""),t.join(".")}},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.\d+\.(.*)$/,fixStr:function(e){return e.split(".").slice(0,3).join(".")}}],a={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-input",e._g(e._b({staticClass:"semver-input",class:{"is-error":!e.isValid},attrs:{value:e.version},on:{input:e.handelInput,blur:e.handleBlur}},"el-input",e.$attrs,!1),e.$listeners))},staticRenderFns:[],name:"ElSemverInput",props:{value:{type:String},preventIllegal:{type:Boolean,default:!0},autoPadding:{type:Boolean,default:!0},prefix:{type:Boolean,default:!0},validRegular:{type:RegExp,default:function(){return/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.([1-9]\d*|0)$/}},autoPaddingRegularList:{type:Array,default:function(){return i}}},data:function(){return{version:this.value,isValid:!0}},watch:{value:function(e){this.version=e}},methods:{handelInput:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=!1;this.preventIllegal&&(t=t.replace(/[^\d\.]/g,function(e){return e==n&&t.startsWith(n)&&!i?(i=!0,n):""}));var r=this.prefix&&t.length>0&&!t.startsWith(n)?n+t:t,a=this.checkVersionVaild(r);this.$nextTick(function(){e.notify({value:r,isValid:a})})},handleBlur:function(){var e=this.version||"",t=this.autoPaddingRegularList.find(function(t){return t.regular.test(e)});if(this.autoPadding&&t){var i=e+t.padding;return i=i.replace("0.0.0","0.0.1"),i=this.prefix&&!i.startsWith(n)?n+i:i,void this.notify({value:i})}var a=r.find(function(t){return t.regular.test(e)});if(a){var l=a.fixStr(e);return void this.notify({value:l})}this.checkVersionVaild(e)||this.setDefaultVersion()},updateValue:function(e){this.$emit("input",e)},updateValid:function(e){this.$emit("validChange",e),this.isValid=e},notify:function(e){var t=e.value,n=e.isValid,i=void 0===n||n;this.updateValue(t),this.updateValid(i)},checkVersionVaild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").some(function(e){return 0!=e})&&this.validRegular.test(e)},setDefaultVersion:function(){this.notify({value:this.prefix?"v1.0.0":"1.0.0"})}}},l={install:t},u=null;return"undefined"!=typeof window?u=window.Vue:"undefined"!=typeof global&&(u=global.Vue),u&&u.use(l),e.install=t,e.default=a,e}({});
